{% extends "base.html" %}

{% block title %}Configura√ß√µes - Meta de Leitura{% endblock %}

{% block content %}
<div class="page-header">
    <h2>‚öôÔ∏è Configura√ß√µes da Conta</h2>
    <p class="subtitle">Gerencie suas prefer√™ncias</p>
</div>

{% if success %}
<div class="alert alert-success">
    <strong>Sucesso!</strong> {{ success }}
</div>
{% endif %}

{% if error %}
<div class="alert alert-danger">
    <strong>Erro:</strong> {{ error }}
</div>
{% endif %}

<div class="settings-container">
    <div class="settings-card">
        <h3>Informa√ß√µes da Conta</h3>
        <div class="info-group">
            <label>Nome de Usu√°rio:</label>
            <p class="info-value">{{ user.username }}</p>
        </div>
        <div class="info-group">
            <label>Email:</label>
            <p class="info-value">{{ user.email }}</p>
        </div>
        <div class="info-group">
            <label>Membro desde:</label>
            <p class="info-value">{{ user.created_at.strftime('%d/%m/%Y') }}</p>
        </div>
        <div class="info-group">
            <label>Link do Perfil:</label>
            <div class="profile-link-group">
                <input type="text" value="{{ url_for('main.view_profile', user_hash=user.user_hash, _external=True) }}" id="profileLink" class="profile-link" readonly>
                <button type="button" class="btn btn-sm btn-primary" onclick="copyProfileLink()">üìã Copiar</button>
            </div>
        </div>
    </div>
    
    <div class="settings-card">
        <h3>Velocidade de Leitura</h3>
        <form method="POST" class="form">
            <div class="form-group">
                <label for="reading_speed">Tempo M√©dio por P√°gina (minutos)</label>
                <input 
                    type="number" 
                    id="reading_speed" 
                    name="reading_speed" 
                    value="{{ user.reading_speed }}" 
                    min="0.5" 
                    step="0.1" 
                    required
                    placeholder="Ex: 2.5"
                >
                <small class="help-text">
                    Esta configura√ß√£o √© usada para calcular quanto tempo voc√™ precisa dedicar diariamente √† leitura.
                    <br>
                    <strong>Exemplos:</strong>
                    <br>
                    ‚Ä¢ Leitura r√°pida: 1.5 - 2.0 min/p√°gina
                    <br>
                    ‚Ä¢ Leitura normal: 2.5 - 3.0 min/p√°gina
                    <br>
                    ‚Ä¢ Leitura lenta: 3.5 - 4.0 min/p√°gina
                </small>
            </div>
            
            <button type="submit" class="btn btn-primary">Salvar Configura√ß√µes</button>
        </form>
    </div>
    
    <div class="settings-card info-card">
        <h3>‚ÑπÔ∏è Como Funciona</h3>
        <p>
            A velocidade de leitura √© usada para calcular o <strong>tempo di√°rio de leitura</strong:
        </p>
        <div class="formula-box">
            <code>Tempo por Dia (min) = P√°ginas por Dia √ó Velocidade de Leitura</code>
        </div>
        <p>
            Por exemplo, se voc√™ precisa ler <strong>10 p√°ginas por dia</strong> e sua velocidade √© <strong>2.5 min/p√°gina</strong>,
            voc√™ precisar√° dedicar <strong>25 minutos por dia</strong> √† leitura.
        </p>
    </div>
</div>

<div class="settings-actions">
    <a href="{{ url_for('main.index') }}" class="btn btn-secondary">Voltar</a>
</div>

<style>
    .settings-container {
        display: grid;
        gap: 1.5rem;
        margin-bottom: 2rem;
    }
    
    .settings-card {
        background: white;
        border-radius: 0.75rem;
        padding: 1.5rem;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    .settings-card h3 {
        margin-bottom: 1.5rem;
        font-size: 1.25rem;
    }
    
    .info-group {
        margin-bottom: 1.5rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid #e2e8f0;
    }
    
    .info-group:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
    }
    
    .info-group label {
        display: block;
        font-weight: 600;
        color: #64748b;
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
    }
    
    .info-value {
        font-size: 1.1rem;
        color: #1e293b;
        margin: 0;
    }
    
    .help-text {
        display: block;
        margin-top: 0.5rem;
        color: #64748b;
        font-size: 0.85rem;
        line-height: 1.6;
    }
    
    .info-card {
        background: linear-gradient(135deg, #f0f4ff 0%, #f8faff 100%);
        border: 1px solid #e0e7ff;
    }
    
    .formula-box {
        background: white;
        border-left: 4px solid #2563eb;
        padding: 1rem;
        margin: 1rem 0;
        border-radius: 0.375rem;
    }
    
    .formula-box code {
        color: #2563eb;
        font-weight: 600;
        font-family: 'Courier New', monospace;
    }
    
    .settings-actions {
        display: flex;
        gap: 1rem;
    }
    
    .btn-block {
        width: 100%;
    }

    .profile-link-group {
        display: flex;
        gap: 0.5rem;
        margin-top: 0.5rem;
    }

    .profile-link {
        flex: 1;
        padding: 0.5rem;
        border: 1px solid #d1d5db;
        border-radius: 4px;
        font-size: 0.9rem;
        font-family: 'Courier New', monospace;
    }
</style>

<script>
    function copyProfileLink() {
        const link = document.getElementById('profileLink');
        link.select();
        document.execCommand('copy');
        alert('Link copiado! üìã');
    }
</script>
{% endblock %}
