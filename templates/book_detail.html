{% extends "base.html" %}

{% block title %}Detalhes do Livro - Mesa Liter√°ria{% endblock %}

{% block content %}
<div class="page-header">
    <h2>{{ book.name }}</h2>
    <p class="subtitle">Detalhes e progresso de leitura</p>
</div>

{% if book.is_completed %}
<div class="alert alert-success">
    <strong>‚úì Parab√©ns!</strong> Voc√™ concluiu a leitura deste livro!
</div>
{% endif %}

<div class="book-detail-container">
    {% if book.cover_url %}
    <div class="book-cover-section">
        <img src="{{ book.cover_url }}" alt="Capa do livro: {{ book.name }}" class="book-cover" onerror="this.style.display='none'">
    </div>
    {% endif %}
    
    <div class="detail-card">
        <h3>Informa√ß√µes do Livro</h3>
        <table class="info-table">
            <tr>
                <td class="label">T√≠tulo:</td>
                <td class="value">{{ book.name }}</td>
            </tr>
            <tr>
                <td class="label">Total de P√°ginas:</td>
                <td class="value">{{ book.total_pages }} p√°ginas</td>
            </tr>
            <tr>
                <td class="label">Data Limite:</td>
                <td class="value">{{ book.target_date.strftime('%d/%m/%Y') }}</td>
            </tr>
            <tr>
                <td class="label">Cadastrado em:</td>
                <td class="value">{{ book.created_at.strftime('%d/%m/%Y √†s %H:%M') }}</td>
            </tr>
        </table>
    </div>
    
    <div class="detail-card">
        <h3>Progresso</h3>
        <div class="progress-section">
            <div class="progress-item">
                <span class="label">P√°ginas Lidas:</span>
                <span class="value">{{ book.current_page }} / {{ book.total_pages }}</span>
            </div>
            
            <div class="progress-bar large">
                <div class="progress-fill" style="width: {{ book.current_percentage }}%"></div>
                <span class="progress-text">{{ "%.2f"|format(book.current_percentage) }}%</span>
            </div>
            
            <div class="progress-item">
                <span class="label">P√°ginas Restantes:</span>
                <span class="value">{{ book.get_pages_remaining() }} p√°ginas</span>
            </div>
        </div>
    </div>
    
    {% if not book.is_completed %}
    <div class="detail-card meta-card">
        <h3>Meta Di√°ria</h3>
        <div class="meta-grid">
            <div class="meta-box">
                <div class="meta-icon">üìÖ</div>
                <div class="meta-content">
                    <span class="meta-label">Dias para Ler:</span>
                    <span class="meta-value">{{ book.get_days_remaining() }}</span>
                </div>
            </div>
            
            <div class="meta-box">
                <div class="meta-icon">üìñ</div>
                <div class="meta-content">
                    <span class="meta-label">P√°ginas por Dia:</span>
                    <span class="meta-value">{{ "%.2f"|format(book.get_pages_per_day()) }}</span>
                </div>
            </div>
            
            <div class="meta-box">
                <div class="meta-icon">‚è±Ô∏è</div>
                <div class="meta-content">
                    <span class="meta-label">Tempo Di√°rio de Leitura:</span>
                    <span class="meta-value">{{ "%.1f"|format(book.get_daily_reading_time()) }} min</span>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<div class="detail-actions">
    <a href="{{ url_for('main.edit_book', book_id=book.id) }}" class="btn btn-warning">Editar Progresso</a>
    <a href="{{ url_for('main.index') }}" class="btn btn-secondary">Voltar</a>
</div>
{% endblock %}
